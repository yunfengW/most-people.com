<template>
  <div id="page-chat-person">
    <mp-header title="å•çº¿è”ç³»" />
  </div>
</template>
<script setup lang="ts">
onMounted(() => {
  // åˆ›å»ºä¸€ä¸ªæ–°çš„EventSourceå®ä¾‹ï¼Œè¿æ¥åˆ°ä½ çš„SSEç«¯ç‚¹
  const eventSource = new EventSource('http://localhost:8001/events/stream')

  // ç›‘å¬æ¶ˆæ¯
  eventSource.onmessage = function (event) {
    // è§£ææ”¶åˆ°çš„æ•°æ®
    const message = event.data

    console.log('ğŸŒŠ', message)
  }

  // ç›‘å¬é”™è¯¯äº‹ä»¶
  eventSource.onerror = function (error) {
    console.error('EventSource failed:', error)
    eventSource.close()
  }
})
</script>
